---
layout: post
title: nodejs
tags:
- nodejs
---


서버 측 자바스크립트와 nodejs

[생활코딩](https://opentutorials.org/course/2136/11850){:target="_blank"}

내용 정리

---

### NodeJs

Chrome V8 JavaScript 엔진으로 빌드된 JavaScript 런타임

확장성있는 네트워크 애플리케이션 

---

#### 연결성

nodejs가 제공하는 기능들을 자바스크립트 프로그래밍 언어의 문법에 맞게 의도하는 바에 해당되는 프로그램을 만든다.


#### Module NPM

Module : 부품으로 사용될 작은 프로그램들

ex) Express, Underscore, Jade


NPM을 통해 애플리케이션에 담아서 다양한 애플리케이션을 만들 수 있다.


#### Router & Controller

controller : 회원가입, 홈페이지, 에러화면 등

Router : 사용자의 요청을 어떤 컨트롤러에 전달해 줄 것인가 하는 중개자의 역할


---





#### nodejs 설치
[nodejs.org](https://nodejs.org/ko/){:target="_blank"}


webserver.js
```javascript
const http = require('http');
 
const hostname = '127.0.0.1';
const port = 1337;
 
var server = http.createServer(function(req, res){
	res.writeHead(200, { 'Content-Type': 'text/plain' });
	res.end('Hello World\n');
});
server.listen(port, hostname, function(){
	console.log(`Server running at http://${hostname}:${port}/`);
});
```



#### 실행

cmd 
cd foldername

node webserver.js


---

#### var (variable) 변수


#### const (constant) 상수

한번 할당이 되면 그다음부터 값을 바꿀수없는 상수


---

### Node Package Manager (NPM)

node계의 앱스토어

설치/삭제/업그레이드/의존성 관리


---

### Express

노드를 사용해서 만들어진 웹 프레임워크

웹애플리케이션 구축

[Express.com](http://expressjs.com/ko/starter/hello-world.html){:target="_blank"}



#### 설치

npm install express --save


---

#### npm init

프로젝트 처음 시작시 현재 디렉토리를 npm의 디렉토리로 지정

package.json 파일이 생성됨

---

#### app.js 생성

메인파일, 메인애플리케이션, 엔트리 애플리케이션

최초의 진입점이 되는 메인 애플리케이션 생성

myapp 디렉토리에 app.js라는 이름의 파일을 작성한 후 다음과 같은 코드를 추가


app.js

```javascript
var express = require('express');
var app = express();

app.get('/', function (req, res) {
  res.send('Hello World!');
});

app.listen(3000, function () {
  console.log('Example app listening on port 3000!');
});
```



#### 정적파일 재공

```javascript
app.use(express.static('public'));
```

---

#### 동적파일과 정적파일

app.js

```javascript
var express = require('express');
var app = express();
app.use(express.static('public'));
app.get('/', function(req, res){
	res.send('hello~');
});
app.get('/dynamic', function(req,res){
	var lis = '';
	for(var i=0; i<5; i++){
		lis = lis + '<li>coding</li>';
	}
	var time = Date();
	var output = `<!doctype html>
	<html lang="ko">
	<head>
		<meta charset="UTF-8">
		<title>Document</title>
	</head>
	<body>

		hello dynamic!

		<ul>
		${lis}
		</ul>

		${time}

	</body>
	</html>`;
	res.send(output);
});
app.get('/route', function(req, res){
	res.send('hello router, <img src="/Lighthouse.jpg">');
});
app.get('/login', function(req, res){
	res.send('login please');
});
app.listen(3000, function(){
	console.log('connented 3000 port!');
});
```


---

### jade 템플릿엔진

npm install jade --save


#### express 템플릿 렌더링설정

```javascript
app.set('view engine', 'jade');
app.set('views','./views');
```



#### 렌더링할 라우트작성

```javascript
app.get('/template', function(req, res){
	res.render('temp');
});
```
